<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>FabEx tutorial: an introduction to the right Hyperledger Fabric explorer</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">FabEx tutorial: an introduction to the right Hyperledger Fabric explorer</h1>
</header>
<section data-field="subtitle" class="p-summary">
Here we will learn the basics of using FabEx — blockchain explorer for Hyperledger Fabric written purely in Go with a focus on simplicity.
</section>
<section data-field="body" class="e-content">
<section name="324a" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="dcbb" id="dcbb" class="graf graf--h3 graf--leading graf--title">FabEx tutorial: an introduction to the right Hyperledger Fabric explorer</h3><figure name="5fbd" id="5fbd" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*ACvm0vLGezyQqryEA-u1fg.png" data-width="400" data-height="250" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*ACvm0vLGezyQqryEA-u1fg.png"></figure><p name="92e4" id="92e4" class="graf graf--p graf-after--figure">Here we will learn the basics of using FabEx — blockchain explorer for Hyperledger Fabric written purely in Go with a focus on simplicity.</p><p name="2928" id="2928" class="graf graf--p graf-after--p">Let’s start an example HLF network. First make sure you have the required Hyperledger Fabric binaries and Docker images. If not, follow the instructions <a href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/install.html" data-href="https://hyperledger-fabric.readthedocs.io/en/release-2.2/install.html" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">on this page</a>. And then start network:</p><pre name="118e" id="118e" class="graf graf--pre graf-after--p">make fabric-test</pre><p name="e0c4" id="e0c4" class="graf graf--p graf-after--pre">Start CassandraDB (you can choose MongoDB instead, but here we will only consider working with СassandraDB):</p><pre name="a4e3" id="a4e3" class="graf graf--pre graf-after--p"><code class="markup--code markup--pre-code">make cassandra</code></pre><p name="3be7" id="3be7" class="graf graf--p graf-after--pre">Now we can start FabEx. For this we need a configuration file. Take a look at file tests/config.yaml. As you can see, it points to ./tests/connection.yaml:</p><pre name="3047" id="3047" class="graf graf--pre graf-after--p">connectionProfile: ./tests/connection.yaml</pre><p name="877e" id="877e" class="graf graf--p graf-after--pre">It’s just a HLF connection profile prepared by me in advance. When you work with your own HLF network, just specify the path to your connection profile.</p><p name="5ba0" id="5ba0" class="graf graf--p graf-after--p">Now add aliases to<em class="markup--em markup--p-em"> /etc/hosts:</em></p><pre name="cd59" id="cd59" class="graf graf--pre graf-after--p">sudo bash -c &#39;echo &quot;127.0.0.1 org1.example.com peer0.org1.example.com peer1.org1.example.com orderer.org1.example.com ca.org1.example.com&quot; &gt;&gt; /etc/hosts&#39;</pre><p name="b73d" id="b73d" class="graf graf--p graf-after--pre">Then<em class="markup--em markup--p-em"> </em>untar vendored dependencies<em class="markup--em markup--p-em">:</em></p><pre name="14e5" id="14e5" class="graf graf--pre graf-after--p">tar xvf vendor.tar</pre><p name="a2cd" id="a2cd" class="graf graf--p graf-after--pre">Run<em class="markup--em markup--p-em"> </em>FabEx<em class="markup--em markup--p-em">:</em></p><pre name="a878" id="a878" class="graf graf--pre graf-after--p">go run fabex.go -task=grpc -configpath=tests -configname=config -enrolluser=true -db=cassandra</pre><figure name="53cb" id="53cb" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*zFUNO2bsZh6B909X7jyzVQ.png" data-width="1535" data-height="588" src="https://cdn-images-1.medium.com/max/800/1*zFUNO2bsZh6B909X7jyzVQ.png"></figure><p name="849f" id="849f" class="graf graf--p graf-after--figure">It will work with test Fabric network specified in tests/config.yaml.</p><p name="ac73" id="ac73" class="graf graf--p graf-after--p">Look at <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">-task=grpc</em></strong><em class="markup--em markup--p-em"> </em>parameter. This parameter means that FabEx will work as a service with gRPC interface. It will parse blockchain, specified in connection profile, save data to database and respond to RPC queries. But FabEx can work without gRPC interface exposed. It can work in CLI mode. You can instruct FabEx to just parse the blockchain, add data to the database and do nothing else:</p><pre name="0346" id="0346" class="graf graf--pre graf-after--p">go run fabex.go -task=explore -configpath=tests -configname=config -enrolluser=true -db=cassandra</pre><p name="7f61" id="7f61" class="graf graf--p graf-after--pre">Then you can execute CLI commands in another terminal.</p><p name="89ed" id="89ed" class="graf graf--p graf-after--p">For example, you can query block with specific block number:</p><pre name="523f" id="523f" class="graf graf--pre graf-after--p">go run fabex.go -task=getblock -blocknum=1 -configpath=tests -configname=config -enrolluser=true -db=cassandra</pre><figure name="75a7" id="75a7" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*L2SQ9hQMe59evoAe9zOwuA.png" data-width="1069" data-height="377" src="https://cdn-images-1.medium.com/max/800/1*L2SQ9hQMe59evoAe9zOwuA.png"></figure><p name="33ff" id="33ff" class="graf graf--p graf-after--figure">Get all saved data:</p><pre name="9325" id="9325" class="graf graf--pre graf-after--p">go run fabex.go -task=getall -configpath=tests -configname=config -enrolluser=true -db=cassandra</pre><p name="196f" id="196f" class="graf graf--p graf-after--pre">Get channel info:</p><pre name="1b71" id="1b71" class="graf graf--pre graf-after--p">go run fabex.go -task=channelinfo -configpath=tests -configname=config -enrolluser=true -db=cassandra</pre><p name="abba" id="abba" class="graf graf--p graf-after--pre">Get channel config:</p><pre name="61e2" id="61e2" class="graf graf--pre graf-after--p">go run fabex.go -task=channelconfig -configpath=tests -configname=config -enrolluser=true -db=cassandra</pre><p name="5bc2" id="5bc2" class="graf graf--p graf-after--pre">Ok, back to our FabEx in gRPC mode. Now FabEx parses blockchain and saves all collected data to the CassandraDB. Let’s check it in another terminal:</p><pre name="2284" id="2284" class="graf graf--pre graf-after--p">docker exec -it cassandra bash<br>cqlsh<br>use blocks;<br>select blocknum, channelid, txid, payloadkeys from txs;</pre><figure name="0550" id="0550" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*8bW3GwkVUHOsuhg2Fncrag.png" data-width="1152" data-height="239" src="https://cdn-images-1.medium.com/max/800/1*8bW3GwkVUHOsuhg2Fncrag.png"></figure><p name="9cd7" id="9cd7" class="graf graf--p graf-after--figure">Ok, you see raw data from database (transaction ID, block number, write set keys), it means everything is going well. But how to interact with FabEx from your service? We need a client.</p><p name="d55b" id="d55b" class="graf graf--p graf-after--p">All you need is inside <a href="https://pkg.go.dev/github.com/hyperledger-labs/fabex/client" data-href="https://pkg.go.dev/github.com/hyperledger-labs/fabex/client" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">github.com/hyperledger-labs/fabex/client</a> package. Yes, that’s all. In fact, nothing else is needed. I’ll show you everything now.</p><p name="826e" id="826e" class="graf graf--p graf-after--p">Let’s see example of client package usage: <a href="https://github.com/hyperledger-labs/fabex/blob/master/client/example/client.go" data-href="https://github.com/hyperledger-labs/fabex/blob/master/client/example/client.go" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">https://github.com/hyperledger-labs/fabex/blob/master/client/example/client.go</a></p><p name="d7fb" id="d7fb" class="graf graf--p graf-after--p">You just need to import <a href="https://pkg.go.dev/github.com/hyperledger-labs/fabex/client" data-href="https://pkg.go.dev/github.com/hyperledger-labs/fabex/client" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">github.com/hyperledger-labs/fabex/client</a>, instantiate client object and use methods it has. Run client:</p><pre name="0e97" id="0e97" class="graf graf--pre graf-after--p">go run client/example/client.go</pre><figure name="a67f" id="a67f" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*20fvyQoXuZJq7P41tQHY3w.png" data-width="781" data-height="439" src="https://cdn-images-1.medium.com/max/800/1*20fvyQoXuZJq7P41tQHY3w.png"></figure><p name="92f7" id="92f7" class="graf graf--p graf-after--figure">Feel free to uncomment blocks from client.go to try other queries, it’s very simple. You can integrate this logic to the your application. The client uses gRPС under the hood for effective interaction with FabEx, so you don’t have to worry about network overhead.</p><p name="205d" id="205d" class="graf graf--p graf-after--p graf--trailing">UI is available on <a href="http://localhost:5252/" data-href="http://localhost:5252/" class="markup--anchor markup--p-anchor" rel="nofollow" target="_blank">http://localhost:5252</a>.</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@vadiminshakov" class="p-author h-card">Vadim Inshakov</a> on <a href="https://medium.com/p/cd9ee1848cd9"><time class="dt-published" datetime="2021-01-30T10:28:02.476Z">January 30, 2021</time></a>.</p><p><a href="https://medium.com/@vadiminshakov/fabex-tutorial-an-introduction-to-the-right-hyperledger-fabric-explorer-cd9ee1848cd9" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on January 21, 2024.</p></footer></article></body></html>